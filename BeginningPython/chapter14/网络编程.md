# 网络编程
## 14.1 几个网络模块
### 14.1.1 模块socket
套接字是网络编程中的一个基本组件。套接字基本上是一个信息通道，两端各有一个程序，这些程序可能位于网络上不同的计算机上，通过套接字来发送信息。
Python中，大多数网络编程都隐藏了模块socket的基本工作原理，不与套接字直接交互。  

套接字分为两类：服务器套接字和客户端套接字。  
服务端套接字：等待连接请求，在某个地址+端口处监听，直到客户套接字建立连接。  
客户端套接字：连接服务端套接字，完成后断开连接。  

套接字是`模块socket`中`socket类`的实例。实例化套接字时最多可指定三个参数:  
一个地址族 (默认为socket.AF_INET);  
是流套接字(socket.SOCK_STREAM，默认设置)还是数据报套接字 (socket.SOCK_DGRAM);  
协议(使用默认值0就好)。  
创建普通套接字时，不用提供任何参数。  

服务器套接字先调用方法bind，再调用方法listen来监听特定的地址。然后客户端套接字就可以连接到服务器了，方法是使用connet并提供调用bind时的地址。
(在服务器端， 可使用函数socket.gethostname获取当前机器的主机名)。这里的地址是一个格式为(host, port)的元组。
方法listen接 受一个参数——待办任务清单的长度(即最多可有多少个连接在队列中等待接纳，到达这个数量后将开始拒绝连接)。  
服务器套接字开始监听之后，就可以接受客户端的连接了，这是使用方法accept来完成的。这个方法将阻断（等待）到客户端连接到来为止，
然后返回一个格式为(client, address)的元组，其中client是一个客户端套接字，而address是地址。
> 这里讨论的服务器编程形式称为阻断(同步)网络编程。

为传输数据，套接字提供了两个方法:send和recv(表示receive)。要发送数据，可调用方法send并提供一个字符串;要接收数据，可调用recv并指定最多接收多少个字节的数据。
如果不 确定该指定什么数字，1024是个不错的选择。

举例：最见到的客户端和服务器程序。
```python
# 最简单的服务器
import socket
# 创建socket实例
s = socket.socket()
host = socket.gethostname()
port = 8765
# 先调用bind方法
s.bind((host, port))
# 在调用listen方法开始监听 5表示最多可有5个连接在队列中等待接纳
s.listen(5)
while True:
    c, addr = s.accept()
    print('Got connection from', addr) 
    c.send(b'Thank you for connecting')
    c.close()
```
```python
# 最简单的客户端
import socket
s = socket.socket()

host = socket.gethostname()
port = 8765

# 连接到服务器
s.connect((host, port))
print(s.recv(1024))
```
