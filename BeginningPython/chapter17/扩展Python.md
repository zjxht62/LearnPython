# 扩展Python
Python的优点是易于开发，但是缺点是性能不佳。对于一般的情况下，Python的速度已经够用，
但是如果需要一定的程序运行速度，C、C++、Java等语言通常要快好几个数量级。
## 17.1 鱼和熊掌兼得
如果速度要求很高，也不是很推荐只用C语言开发，因为虽然开发出来的软件执行速度快，但是会降低编程速度。就是要考虑：
是快速编写好程序，还是很久之后写出了速度极快的程序。（除非必须使用C语言，比如程序在嵌入式设备中运行）。  
对于Python编写的程序，要想提高运行速度，可以采取下面的方法：
1. 使用Python开发原型
2. 对程序进行性能分析，找出瓶颈
3. 使用C（或C++、C#、Java等）扩展重写瓶颈部分  

这样的架构兼具两种语言的优点。既能获得Python的简洁灵活，又能获得低级语言的运行速度。
> 注意  
> 还有其他要选择使用C语言的原因，比如要编写与怪异硬件交互的低级代码。

如果写代码之前就知道了哪里可能是性能瓶颈，那么可以按照下面的提示来处理：
> 提示：将潜在的瓶颈封装起来

当代码写完的时候，可能发现并不需要使用C语言编写扩展来替换它（可能因为硬件的速度足够）。但是这样做的好处就是给你留下了选择的空间。  
扩展的另一个使用场景是遗留代码。你可能想重用一些代码，但这些代码是使用其他语言(如C)编写的。在这种情况下，
可将这些代码“包装”起来(编写一个提供合适接口的小型C语言库)，并使用这个包装器来创建Python扩展。  
接下来将介绍如何扩展Python的经典C语言实现（可以手工编写所有代码，也可以使用工具SWIG），以及如何扩展其他两种Python实现：Jython和IronPython。

**反过来**  
反过来说，也可以在其他低级语言中嵌入Python解释器来执行少量的脚本和扩展。在这种情况下，嵌入Python追求的不是速度而是灵活性。  
现实中有很多这样的例子，例如，很多计算机游戏(它们几乎都是使用编译型语言编写的，其代码库几乎都是为最大限度提高速度而开发的)，
都使用诸如Python等动态语言来描述高级行为(如游戏中角色的“智力”)，而主代码引擎负责图形等方面。